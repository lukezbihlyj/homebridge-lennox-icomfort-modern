{
  "pluginAlias": "LennoxIComfortModern",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Lennox iComfort thermostat integration supporting both older Wifi models and newer S30/S40/E30/M30 systems.",
  "footerDisplay": "For multi-zone systems (S30/E30/M30 only), each zone will appear as a separate thermostat in HomeKit.",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "Lennox iComfort",
        "description": "The name that will appear in the Homebridge log."
      },
      "deviceType": {
        "title": "Device Type",
        "type": "string",
        "default": "s30",
        "oneOf": [
          { "title": "Lennox iComfort S30/S40/E30/M30", "enum": ["s30"] },
          { "title": "Lennox iComfort Wifi", "enum": ["wifi"] }
        ],
        "description": "Select your thermostat model: S30/S40/E30/M30 use lennoxicomfort.com, older Wifi models use myicomfort.com"
      },
      "username": {
        "title": "Email",
        "type": "string",
        "format": "email",
        "required": true,
        "description": "Your iComfort account email address."
      },
      "password": {
        "title": "Password",
        "type": "string",
        "required": true,
        "description": "Your iComfort account password."
      },
      "pollInterval": {
        "title": "Poll Interval (seconds)",
        "type": "integer",
        "default": 10,
        "minimum": 5,
        "maximum": 300,
        "description": "How often to poll the Lennox cloud for updates (in seconds). Minimum 5 seconds."
      },
      "appId": {
        "title": "Application ID",
        "type": "string",
        "description": "(S30/E30/M30 only) Custom application ID for API authentication. Leave blank to use the default."
      },
      "debugmode": {
        "title": "Debug Mode",
        "type": "boolean",
        "default": false,
        "description": "Enable debug logging."
      },
      "temperatureUnit": {
        "title": "Temperature Display Unit",
        "type": "string",
        "default": "auto",
        "oneOf": [
          { "title": "Auto (use thermostat setting)", "enum": ["auto"] },
          { "title": "Celsius", "enum": ["C"] },
          { "title": "Fahrenheit", "enum": ["F"] }
        ],
        "description": "Temperature display preference. 'Auto' uses whatever your thermostat is set to."
      },
      "enableEmergencyHeat": {
        "title": "Enable Emergency Heat Switch",
        "type": "boolean",
        "default": false,
        "description": "(S30/S40/E30/M30 only) For dual-fuel systems, adds a switch accessory to enable emergency heat only mode."
      }
    },
    "required": [
      "username",
      "password"
    ]
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Device Selection",
      "items": [
        {
          "key": "deviceType",
          "type": "radios-inline",
          "titleMap": [
            { "value": "wifi", "name": "iComfort Wifi" },
            { "value": "s30", "name": "S30 / S40 / E30 / M30" }
          ]
        }
      ]
    },
    {
      "type": "fieldset",
      "title": "Account Credentials",
      "items": [
        "username",
        "password"
      ]
    },
    {
      "type": "fieldset",
      "title": "Optional Settings",
      "expandable": true,
      "items": [
        "name",
        "pollInterval",
        "temperatureUnit",
        {
          "key": "enableEmergencyHeat",
          "condition": { "deviceType": "s30" }
        },
        "debugmode"
      ]
    },
    {
      "type": "fieldset",
      "title": "Advanced",
      "expandable": true,
      "items": [
        {
          "key": "appId",
          "condition": { "deviceType": "s30" }
        }
      ]
    }
  ]
}
